package br.com.piracraft.lobby2.afk;

import java.util.HashMap;
import java.util.Map;

import org.bukkit.Bukkit;
import org.bukkit.Location;
import org.bukkit.entity.Player;
import org.bukkit.scheduler.BukkitRunnable;

import br.com.piracraft.lobby2.Main;

public class AfkKick {

	private Map<String, Location> locations = new HashMap<>();

	public void kicar() {
		new BukkitRunnable() {
			public void run() {
				for (Player s : Bukkit.getOnlinePlayers()) {

					if (getLocations().containsKey(s.getName())) {
						if (getLocations().get(s.getName()).equals(s.getLocation())) {
							if (br.com.piracraft.api.Main.network.get(s) == 1) {
								s.kickPlayer(
										"§cVoce foi kickado do §6Pira§fCraft§c!\n§7Voce passou muito tempo sem se mexer.\n§awww.piracraft.com.br");
							} else {
								s.kickPlayer(
										"§cYou were kicked from §4U§6Play§9Craft§c!\n§7You spent a lot of time afk.\n§awww.uplaycraft.com");
							}
						} else {
							getLocations().put(s.getName(), s.getLocation());
						}
					} else {
						getLocations().put(s.getName(), s.getLocation());
					}
				}
			}
		}.runTaskTimer(Main.getPlugin(), 0, 300 * 20);
	}

	public Map<String, Location> getLocations() {
		return locations;
	}

	public void setLocations(Map<String, Location> locations) {
		this.locations = locations;
	}

}
