package br.com.piracraft.lobby2.npc;

import java.sql.ResultSet;
import java.sql.SQLException;

import org.bukkit.Bukkit;
import org.bukkit.Location;
import org.bukkit.scheduler.BukkitRunnable;

import br.com.piracraft.lobby2.Main;
import br.com.piracraft.lobby2.utils.Cor;
import br.com.piracraft.lobby2.utils.UtilsChat;

public class MySQLNPC {

	private Location location;
	private String nome;
	private String skin;
	
	MySQLNPC(NPC npc) {
		new BukkitRunnable() {
			@Override
			public void run() {
				try {
					ResultSet resultSet = Main.getMysql().conectar().createStatement().executeQuery(
							"SELECT * FROM `V_NPC_LOCALIZACAO` WHERE `NOMEMINIGAME` = '" + String.valueOf(npc) + "'");
					if (resultSet.next()) {
						setLocation(new Location(Bukkit.getWorld("world"),
								Double.valueOf(resultSet.getString("COORDENADA").split(",")[0]),
								Double.valueOf(resultSet.getString("COORDENADA").split(",")[1]),
								Double.valueOf(resultSet.getString("COORDENADA").split(",")[2]),
								Float.valueOf(resultSet.getString("COORDENADA").split(",")[3]),
								Float.valueOf(resultSet.getString("COORDENADA").split(",")[4])));
						setNome(resultSet.getString("NOME"));
						setSkin(resultSet.getString("SKIN"));
					}
					resultSet.getStatement().getConnection().close();

				} catch (SQLException e) {
					new UtilsChat("Mysq", e.getMessage(), Cor.Vermelho).enviarAlertaConsole();
				}
			}
		}.runTaskAsynchronously(Main.getPlugin());
	}

	public enum NPC {
		SkyWars, Factions, KitPvp, HardCore, SeteDias;
	}

	public Location getLocation() {
		return location;
	}

	public void setLocation(Location location) {
		this.location = location;
	}

	public String getNome() {
		return nome;
	}

	public void setNome(String nome) {
		this.nome = nome;
	}

	public String getSkin() {
		return skin;
	}

	public void setSkin(String skin) {
		this.skin = skin;
	}

}
