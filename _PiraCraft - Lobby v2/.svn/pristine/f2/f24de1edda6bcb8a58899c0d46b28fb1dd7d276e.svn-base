package br.com.piracraft.lobby2.npc;

import org.bukkit.scheduler.BukkitRunnable;

import br.com.piracraft.lobby2.Main;
import br.com.piracraft.lobby2.npc.MySQLNPC.NPC;
import br.com.piracraft.lobby2.utils.Cor;
import br.com.piracraft.lobby2.utils.UtilsChat;

public class SetarNPC {

	public void spawn() {
		try {
			setar();
			new BukkitRunnable() {
				@Override
				public void run() {
					new RemoverNPCs().removerNPCs();
					new SpawnNPC(Main.npc.get(NPC.Factions).getLocation(), Main.npc.get(NPC.Factions).getNome(),
							Main.npc.get(NPC.Factions).getSkin()).Spawn();
					new SpawnNPC(Main.npc.get(NPC.HardCore).getLocation(), Main.npc.get(NPC.HardCore).getNome(),
							Main.npc.get(NPC.HardCore).getSkin()).Spawn();
					new SpawnNPC(Main.npc.get(NPC.KitPvp).getLocation(), Main.npc.get(NPC.KitPvp).getNome(),
							Main.npc.get(NPC.KitPvp).getSkin()).Spawn();
					new SpawnNPC(Main.npc.get(NPC.SeteDias).getLocation(), Main.npc.get(NPC.SeteDias).getNome(),
							Main.npc.get(NPC.SeteDias).getSkin()).Spawn();
					new SpawnNPC(Main.npc.get(NPC.SkyWars).getLocation(), Main.npc.get(NPC.SkyWars).getNome(),
							Main.npc.get(NPC.SkyWars).getSkin()).Spawn();
					new UtilsChat("Aviso", "Spawnando npcs.", Cor.Verde).enviarAlertaConsole();
				}
			}.runTaskTimer(Main.getPlugin(), 20, 5 * 60 * 20);
		} catch (Exception e) {
			new UtilsChat("ERRO", e.getMessage(), Cor.Vermelho).enviarAlertaConsole();
		}
	}

	public void setar() {
		try {
			Main.npc.put(NPC.Factions, new MySQLNPC(NPC.Factions));
			Main.npc.put(NPC.HardCore, new MySQLNPC(NPC.HardCore));
			Main.npc.put(NPC.KitPvp, new MySQLNPC(NPC.KitPvp));
			Main.npc.put(NPC.SeteDias, new MySQLNPC(NPC.SeteDias));
			Main.npc.put(NPC.SkyWars, new MySQLNPC(NPC.SkyWars));
		} catch (Exception e) {
			new UtilsChat("ERRO", e.getMessage(), Cor.Vermelho).enviarAlertaConsole();
		}
	}
}
