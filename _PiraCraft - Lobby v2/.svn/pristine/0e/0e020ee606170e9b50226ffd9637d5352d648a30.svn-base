package br.com.piracraft.lobby2.menus;

import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;

import org.bukkit.Bukkit;
import org.bukkit.Material;
import org.bukkit.entity.Player;
import org.bukkit.inventory.Inventory;

import br.com.piracraft.api.caixas.ItemAPI;
import br.com.piracraft.api.util.MySQL;

public class MenuKitpvp {

	private Player player;
	public static Inventory inventory = Bukkit.createInventory(null, 45, "§aKit Pvp");

	public MenuKitpvp(Player player) {
		setPlayer(player);
	}

	public static Integer check(String sala){
		PreparedStatement stm = null;
		try {
			stm = MySQL.conectar().prepareStatement("SELECT * FROM V_MENU_SERVIDORES WHERE `NOMEDASALA` = ?");
			stm.setString(1, "KitPvP0" + sala);
			ResultSet rs = stm.executeQuery();
			while (rs.next()) {
				return rs.getInt("ATIVO");
			}
			rs.close();
			stm.close();
			return 0;
		} catch (SQLException e) {
			return 0;
		}
	}

	public void setarItens() {
		for (int i = 0; i < 10; i++) {
			inventory.setItem(i, ItemAPI.Criar(Material.STAINED_GLASS_PANE, 1, 15, " ", false));
		}
		inventory.setItem(17, ItemAPI.Criar(Material.STAINED_GLASS_PANE, 1, 15, " ", false));
		inventory.setItem(18, ItemAPI.Criar(Material.STAINED_GLASS_PANE, 1, 15, " ", false));
		if (check("1") == 1){
			inventory.setItem(20,
					ItemAPI.Criar(Material.IRON_SWORD, 1, 0, "§6§lSala 1", false, " ", "§7Click para conectar"));
		} else {
			inventory.setItem(20,
					ItemAPI.Criar(Material.BARRIER, 1, 0, "§c§lSala 1", false, " ", "§cServidor está off-line"));
		}
		if (check("2") == 1){
			inventory.setItem(22,
					ItemAPI.Criar(Material.IRON_SWORD, 1, 0, "§6§lSala 2", false, " ", "§7Click para conectar"));
		} else {
			inventory.setItem(22,
					ItemAPI.Criar(Material.BARRIER, 1, 0, "§c§lSala 2", false, " ", "§cServidor está off-line"));
		}
		if (check("3") == 1){
			inventory.setItem(24,
					ItemAPI.Criar(Material.IRON_SWORD, 1, 0, "§6§lSala 3", false, " ", "§7Click para conectar"));
		} else {
			inventory.setItem(24,
					ItemAPI.Criar(Material.BARRIER, 1, 0, "§c§lSala 3", false, " ", "§cServidor está off-line"));
		}
		inventory.setItem(26, ItemAPI.Criar(Material.STAINED_GLASS_PANE, 1, 15, " ", false));
		inventory.setItem(27, ItemAPI.Criar(Material.STAINED_GLASS_PANE, 1, 15, " ", false));

		for (int i = 35; i < 45; i++) {
			inventory.setItem(i, ItemAPI.Criar(Material.STAINED_GLASS_PANE, 1, 15, " ", false));
		}

	}

	public void abrir() {
		getPlayer().openInventory(inventory);
	}

	public Player getPlayer() {
		return player;
	}

	public void setPlayer(Player player) {
		this.player = player;
	}

}
